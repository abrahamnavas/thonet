{"version":3,"sources":["webpack:///_assets/scripts/uiengine-preview.7d527f1efb61f66ec24a.js","webpack:////Users/dennisreimann/Sources/uiengine/node_modules/iframe-resizer/js/iframeResizer.contentWindow.js"],"names":["webpackJsonp","KUWr","module","exports","undefined","addEventListener","el","evt","func","window","attachEvent","removeEventListener","detachEvent","capitalizeFirstLetter","string","charAt","toUpperCase","slice","formatLogMsg","msg","msgID","myID","log","logging","console","warn","init","readDataFromParent","location","href","readDataFromPage","setMargin","setBodyStyle","bodyBackground","bodyPadding","injectClearFixIntoBodyElement","checkHeightMode","checkWidthMode","stopInfiniteResizingOfIFrame","setupPublicMethods","startEventListeners","inPageLinks","setupInPageLinks","sendSize","readyCallback","strBool","str","data","initMsg","substr","msgIdLen","split","bodyMargin","Number","calculateWidth","interval","autoResize","bodyMarginStr","heightCalcMode","tolerance","enable","resizeFrom","widthCalcMode","setupCustomCalcMethods","calcMode","calcFunc","customCalcMethods","Object","iFrameResizer","constructor","JSON","stringify","messageCallback","targetOriginDefault","targetOrigin","heightCalculationMethod","widthCalculationMethod","chkCSS","attr","value","indexOf","document","body","style","documentElement","height","manageTriggerEvent","options","listener","add","eventName","handleEvent","eventType","eventHandlersByName","remove","eventNames","Array","prototype","map","method","manageEventListeners","checkCalcMode","calcModeDefault","modes","type","heightCalcModeDefault","getHeight","widthCalcModeDefault","getWidth","setupMutationObserver","stopMsgsToParent","sendPermit","removeMsgListener","receiver","disconnectMutationObserver","bodyObserver","disconnect","stopEventListeners","clearInterval","intervalTimer","teardown","clearFix","createElement","clear","display","appendChild","getPagePosition","x","pageXOffset","scrollLeft","y","pageYOffset","scrollTop","getElementPosition","elPosition","getBoundingClientRect","pagePosition","parseInt","left","top","findTarget","hash","hashData","decodeURIComponent","target","getElementById","getElementsByName","jumpPosition","sendMsg","checkLocationHash","bindAnchors","setupLink","linkClicked","e","preventDefault","this","getAttribute","forEach","call","querySelectorAll","bindLocationHash","initCheck","setTimeout","eventCancelTimer","win","parentIFrame","resize","close","getId","getPageInfo","callback","pageInfoCallback","moveToAnchor","reset","resetIFrame","scrollTo","scrollToOffset","sendMessage","setHeightCalculationMethod","setWidthCalculationMethod","setTargetOrigin","size","customHeight","customWidth","initInterval","setInterval","Math","abs","setupBodyMutationObserver","addImageLoadListners","mutation","addImageLoadListener","element","complete","src","imageLoaded","imageError","elements","push","attributeName","removeFromArray","splice","removeImageLoadListener","imageEventTriggered","event","typeDesc","mutationObserved","mutations","MutationObserver","WebKitMutationObserver","observer","querySelector","config","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","observe","forceIntervalTimer","getComputedStyle","prop","retVal","defaultView","test","base","runtimeStyle","currentStyle","pixelLeft","chkEventThottle","timer","throttledTimer","getMaxElement","side","elementsLength","length","elVal","maxVal","Side","getNow","i","getAllMeasurements","dimention","bodyOffset","bodyScroll","documentElementOffset","documentElementScroll","getTaggedElements","tag","getAllElements","sizeIFrame","triggerEvent","triggerEventDesc","isForceResizableEvent","isForceResizableCalcMode","resetRequiredMethods","logIgnored","currentHeight","currentWidth","checkTolarance","a","b","width","lockTrigger","triggerLocked","doubleEventList","resetPage","sizeIFrameThrottled","clearTimeout","triggerLockedTimer","triggerReset","hcm","message","postMessage","getMessageType","getData","isMiddleTier","isInitMsg","true","false","callFromParent","messageType","processRequestFromParent","readyState","source","firstRun","initLock","initFromParent","inPageLink","pageInfo","msgBody","parse","click","max","min","parent","offsetHeight","scrollWidth","Date","now","getTime","offset","scrollHeight","custom","apply","grow","lowestElement","taggedElement","offsetWidth","scroll","rightMostElement","context","args","result","timeout","previous","later","remaining","arguments"],"mappings":"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","file":"_assets/scripts/uiengine-preview.7d527f1efb61f66ec24a.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ \"KUWr\":\n/***/ (function(module, exports) {\n\n/*\n * File: iframeResizer.contentWindow.js\n * Desc: Include this file in any page being loaded into an iframe\n *       to force the iframe to resize to the content size.\n * Requires: iframeResizer.js on host page.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Ian Caunce - ian@hallnet.co.uk\n */\n\n\n;(function(undefined) {\n  'use strict';\n\n  if(typeof window === 'undefined') return; // don't run for server side render\n\n  var\n    autoResize            = true,\n    base                  = 10,\n    bodyBackground        = '',\n    bodyMargin            = 0,\n    bodyMarginStr         = '',\n    bodyObserver          = null,\n    bodyPadding           = '',\n    calculateWidth        = false,\n    doubleEventList       = {'resize':1,'click':1},\n    eventCancelTimer      = 128,\n    firstRun              = true,\n    height                = 1,\n    heightCalcModeDefault = 'bodyOffset',\n    heightCalcMode        = heightCalcModeDefault,\n    initLock              = true,\n    initMsg               = '',\n    inPageLinks           = {},\n    interval              = 32,\n    intervalTimer         = null,\n    logging               = false,\n    msgID                 = '[iFrameSizer]',  //Must match host page msg ID\n    msgIdLen              = msgID.length,\n    myID                  = '',\n    observer              = null,\n    resetRequiredMethods  = {max:1,min:1,bodyScroll:1,documentElementScroll:1},\n    resizeFrom            = 'child',\n    sendPermit            = true,\n    target                = window.parent,\n    targetOriginDefault   = '*',\n    tolerance             = 0,\n    triggerLocked         = false,\n    triggerLockedTimer    = null,\n    throttledTimer        = 16,\n    width                 = 1,\n    widthCalcModeDefault  = 'scroll',\n    widthCalcMode         = widthCalcModeDefault,\n    win                   = window,\n    messageCallback       = function() { warn('MessageCallback function not defined'); },\n    readyCallback         = function() {},\n    pageInfoCallback      = function() {},\n    customCalcMethods     = {\n      height: function() {\n        warn('Custom height calculation function not defined');\n        return document.documentElement.offsetHeight;\n      },\n      width: function() {\n        warn('Custom width calculation function not defined');\n        return document.body.scrollWidth;\n      }\n    },\n    eventHandlersByName   = {};\n\n\n  function addEventListener(el,evt,func) {\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if ('addEventListener' in window) {\n      el.addEventListener(evt,func, false);\n    } else if ('attachEvent' in window) { //IE\n      el.attachEvent('on'+evt,func);\n    }\n  }\n\n  function removeEventListener(el,evt,func) {\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if ('removeEventListener' in window) {\n      el.removeEventListener(evt,func, false);\n    } else if ('detachEvent' in window) { //IE\n      el.detachEvent('on'+evt,func);\n    }\n  }\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  //Based on underscore.js\n  function throttle(func) {\n    var\n      context, args, result,\n      timeout = null,\n      previous = 0,\n      later = function() {\n        previous = getNow();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = args = null;\n        }\n      };\n\n    return function() {\n      var now = getNow();\n\n      if (!previous) {\n        previous = now;\n      }\n\n      var remaining = throttledTimer - (now - previous);\n\n      context = this;\n      args = arguments;\n\n      if (remaining <= 0 || remaining > throttledTimer) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n\n        previous = now;\n        result = func.apply(context, args);\n\n        if (!timeout) {\n          context = args = null;\n        }\n\n      } else if (!timeout) {\n        timeout = setTimeout(later, remaining);\n      }\n\n      return result;\n    };\n  }\n\n  var getNow = Date.now || function() {\n    /* istanbul ignore next */ // Not testable in PhantonJS\n    return new Date().getTime();\n  };\n\n  function formatLogMsg(msg) {\n    return msgID + '[' + myID + ']' + ' ' + msg;\n  }\n\n  function log(msg) {\n    if (logging && ('object' === typeof window.console)) {\n      console.log(formatLogMsg(msg));\n    }\n  }\n\n  function warn(msg) {\n    if ('object' === typeof window.console) {\n      console.warn(formatLogMsg(msg));\n    }\n  }\n\n\n  function init() {\n    readDataFromParent();\n    log('Initialising iFrame ('+location.href+')');\n    readDataFromPage();\n    setMargin();\n    setBodyStyle('background',bodyBackground);\n    setBodyStyle('padding',bodyPadding);\n    injectClearFixIntoBodyElement();\n    checkHeightMode();\n    checkWidthMode();\n    stopInfiniteResizingOfIFrame();\n    setupPublicMethods();\n    startEventListeners();\n    inPageLinks = setupInPageLinks();\n    sendSize('init','Init message from host page');\n    readyCallback();\n  }\n\n  function readDataFromParent() {\n\n    function strBool(str) {\n      return 'true' === str ? true : false;\n    }\n\n    var data = initMsg.substr(msgIdLen).split(':');\n\n    myID               = data[0];\n    bodyMargin         = (undefined !== data[1]) ? Number(data[1])   : bodyMargin; //For V1 compatibility\n    calculateWidth     = (undefined !== data[2]) ? strBool(data[2])  : calculateWidth;\n    logging            = (undefined !== data[3]) ? strBool(data[3])  : logging;\n    interval           = (undefined !== data[4]) ? Number(data[4])   : interval;\n    autoResize         = (undefined !== data[6]) ? strBool(data[6])  : autoResize;\n    bodyMarginStr      = data[7];\n    heightCalcMode     = (undefined !== data[8]) ? data[8]           : heightCalcMode;\n    bodyBackground     = data[9];\n    bodyPadding        = data[10];\n    tolerance          = (undefined !== data[11]) ? Number(data[11]) : tolerance;\n    inPageLinks.enable = (undefined !== data[12]) ? strBool(data[12]): false;\n    resizeFrom         = (undefined !== data[13]) ? data[13]         : resizeFrom;\n    widthCalcMode      = (undefined !== data[14]) ? data[14]         : widthCalcMode;\n  }\n\n  function readDataFromPage() {\n    function readData() {\n      var data = window.iFrameResizer;\n\n      log('Reading data from page: ' + JSON.stringify(data));\n\n      messageCallback     = ('messageCallback'         in data) ? data.messageCallback         : messageCallback;\n      readyCallback       = ('readyCallback'           in data) ? data.readyCallback           : readyCallback;\n      targetOriginDefault = ('targetOrigin'            in data) ? data.targetOrigin            : targetOriginDefault;\n      heightCalcMode      = ('heightCalculationMethod' in data) ? data.heightCalculationMethod : heightCalcMode;\n      widthCalcMode       = ('widthCalculationMethod'  in data) ? data.widthCalculationMethod  : widthCalcMode;\n    }\n\n    function setupCustomCalcMethods(calcMode, calcFunc) {\n      if ('function' === typeof calcMode) {\n        log('Setup custom ' + calcFunc + 'CalcMethod');\n        customCalcMethods[calcFunc] = calcMode;\n        calcMode = 'custom';\n      }\n\n      return calcMode;\n    }\n\n    if(('iFrameResizer' in window) && (Object === window.iFrameResizer.constructor)) {\n      readData();\n      heightCalcMode = setupCustomCalcMethods(heightCalcMode, 'height');\n      widthCalcMode  = setupCustomCalcMethods(widthCalcMode,  'width');\n    }\n\n    log('TargetOrigin for parent set to: ' + targetOriginDefault);\n  }\n\n\n  function chkCSS(attr,value) {\n    if (-1 !== value.indexOf('-')) {\n      warn('Negative CSS value ignored for '+attr);\n      value='';\n    }\n    return value;\n  }\n\n  function setBodyStyle(attr,value) {\n    if ((undefined !== value) && ('' !== value) && ('null' !== value)) {\n      document.body.style[attr] = value;\n      log('Body '+attr+' set to \"'+value+'\"');\n    }\n  }\n\n  function setMargin() {\n    //If called via V1 script, convert bodyMargin from int to str\n    if (undefined === bodyMarginStr) {\n      bodyMarginStr = bodyMargin+'px';\n    }\n\n    setBodyStyle('margin',chkCSS('margin',bodyMarginStr));\n  }\n\n  function stopInfiniteResizingOfIFrame() {\n    document.documentElement.style.height = '';\n    document.body.style.height = '';\n    log('HTML & body height set to \"auto\"');\n  }\n\n\n  function manageTriggerEvent(options) {\n\n    var listener = {\n      add:    function(eventName) {\n        function handleEvent() {\n          sendSize(options.eventName,options.eventType);\n        }\n\n        eventHandlersByName[eventName] = handleEvent;\n\n        addEventListener(window,eventName,handleEvent);\n      },\n      remove: function(eventName) {\n        var handleEvent = eventHandlersByName[eventName];\n        delete eventHandlersByName[eventName];\n\n        removeEventListener(window,eventName,handleEvent);\n      }\n    };\n\n    if(options.eventNames && Array.prototype.map) {\n      options.eventName = options.eventNames[0];\n      options.eventNames.map(listener[options.method]);\n    } else {\n      listener[options.method](options.eventName);\n    }\n\n    log(capitalizeFirstLetter(options.method) + ' event listener: ' + options.eventType);\n  }\n\n  function manageEventListeners(method) {\n    manageTriggerEvent({method:method, eventType: 'Animation Start',           eventNames: ['animationstart','webkitAnimationStart'] });\n    manageTriggerEvent({method:method, eventType: 'Animation Iteration',       eventNames: ['animationiteration','webkitAnimationIteration'] });\n    manageTriggerEvent({method:method, eventType: 'Animation End',             eventNames: ['animationend','webkitAnimationEnd'] });\n    manageTriggerEvent({method:method, eventType: 'Input',                     eventName:  'input' });\n    manageTriggerEvent({method:method, eventType: 'Mouse Up',                  eventName:  'mouseup' });\n    manageTriggerEvent({method:method, eventType: 'Mouse Down',                eventName:  'mousedown' });\n    manageTriggerEvent({method:method, eventType: 'Orientation Change',        eventName:  'orientationchange' });\n    manageTriggerEvent({method:method, eventType: 'Print',                     eventName:  ['afterprint', 'beforeprint'] });\n    manageTriggerEvent({method:method, eventType: 'Ready State Change',        eventName:  'readystatechange' });\n    manageTriggerEvent({method:method, eventType: 'Touch Start',               eventName:  'touchstart' });\n    manageTriggerEvent({method:method, eventType: 'Touch End',                 eventName:  'touchend' });\n    manageTriggerEvent({method:method, eventType: 'Touch Cancel',              eventName:  'touchcancel' });\n    manageTriggerEvent({method:method, eventType: 'Transition Start',          eventNames: ['transitionstart','webkitTransitionStart','MSTransitionStart','oTransitionStart','otransitionstart'] });\n    manageTriggerEvent({method:method, eventType: 'Transition Iteration',      eventNames: ['transitioniteration','webkitTransitionIteration','MSTransitionIteration','oTransitionIteration','otransitioniteration'] });\n    manageTriggerEvent({method:method, eventType: 'Transition End',            eventNames: ['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend'] });\n    if('child' === resizeFrom) {\n      manageTriggerEvent({method:method, eventType: 'IFrame Resized',        eventName:  'resize' });\n    }\n  }\n\n  function checkCalcMode(calcMode,calcModeDefault,modes,type) {\n    if (calcModeDefault !== calcMode) {\n      if (!(calcMode in modes)) {\n        warn(calcMode + ' is not a valid option for '+type+'CalculationMethod.');\n        calcMode=calcModeDefault;\n      }\n      log(type+' calculation method set to \"'+calcMode+'\"');\n    }\n\n    return calcMode;\n  }\n\n  function checkHeightMode() {\n    heightCalcMode = checkCalcMode(heightCalcMode,heightCalcModeDefault,getHeight,'height');\n  }\n\n  function checkWidthMode() {\n    widthCalcMode = checkCalcMode(widthCalcMode,widthCalcModeDefault,getWidth,'width');\n  }\n\n  function startEventListeners() {\n    if ( true === autoResize ) {\n      manageEventListeners('add');\n      setupMutationObserver();\n    }\n    else {\n      log('Auto Resize disabled');\n    }\n  }\n\n  function stopMsgsToParent() {\n    log('Disable outgoing messages');\n    sendPermit = false;\n  }\n\n  function removeMsgListener() {\n    log('Remove event listener: Message');\n    removeEventListener(window, 'message', receiver);\n  }\n\n  function disconnectMutationObserver() {\n    if (null !== bodyObserver) {\n      /* istanbul ignore next */ // Not testable in PhantonJS\n      bodyObserver.disconnect();\n    }\n  }\n\n  function stopEventListeners() {\n    manageEventListeners('remove');\n    disconnectMutationObserver();\n    clearInterval(intervalTimer);\n  }\n\n  function teardown() {\n    stopMsgsToParent();\n    removeMsgListener();\n    if (true === autoResize) stopEventListeners();\n  }\n\n  function injectClearFixIntoBodyElement() {\n    var clearFix = document.createElement('div');\n    clearFix.style.clear   = 'both';\n    clearFix.style.display = 'block'; //Guard against this having been globally redefined in CSS.\n    document.body.appendChild(clearFix);\n  }\n\n  function setupInPageLinks() {\n\n    function getPagePosition () {\n      return {\n        x: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n        y: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n      };\n    }\n\n    function getElementPosition(el) {\n      var\n        elPosition   = el.getBoundingClientRect(),\n        pagePosition = getPagePosition();\n\n      return {\n        x: parseInt(elPosition.left,10) + parseInt(pagePosition.x,10),\n        y: parseInt(elPosition.top,10)  + parseInt(pagePosition.y,10)\n      };\n    }\n\n    function findTarget(location) {\n      function jumpToTarget(target) {\n        var jumpPosition = getElementPosition(target);\n\n        log('Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n        sendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      }\n\n      var\n        hash     = location.split('#')[1] || location, //Remove # if present\n        hashData = decodeURIComponent(hash),\n        target   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n      if (undefined !== target) {\n        jumpToTarget(target);\n      } else {\n        log('In page link (#' + hash + ') not found in iFrame, so sending to parent');\n        sendMsg(0,0,'inPageLink','#'+hash);\n      }\n    }\n\n    function checkLocationHash() {\n      if ('' !== location.hash && '#' !== location.hash) {\n        findTarget(location.href);\n      }\n    }\n\n    function bindAnchors() {\n      function setupLink(el) {\n        function linkClicked(e) {\n          e.preventDefault();\n\n          /*jshint validthis:true */\n          findTarget(this.getAttribute('href'));\n        }\n\n        if ('#' !== el.getAttribute('href')) {\n          addEventListener(el,'click',linkClicked);\n        }\n      }\n\n      Array.prototype.forEach.call( document.querySelectorAll( 'a[href^=\"#\"]' ), setupLink );\n    }\n\n    function bindLocationHash() {\n      addEventListener(window,'hashchange',checkLocationHash);\n    }\n\n    function initCheck() { //check if page loaded with location hash after init resize\n      setTimeout(checkLocationHash,eventCancelTimer);\n    }\n\n    function enableInPageLinks() {\n      /* istanbul ignore else */ // Not testable in phantonJS\n      if(Array.prototype.forEach && document.querySelectorAll) {\n        log('Setting up location.hash handlers');\n        bindAnchors();\n        bindLocationHash();\n        initCheck();\n      } else {\n        warn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');\n      }\n    }\n\n    if(inPageLinks.enable) {\n      enableInPageLinks();\n    } else {\n      log('In page linking not enabled');\n    }\n\n    return {\n      findTarget:findTarget\n    };\n  }\n\n  function setupPublicMethods() {\n    log('Enable public methods');\n\n    win.parentIFrame = {\n\n      autoResize: function autoResizeF(resize) {\n        if (true === resize && false === autoResize) {\n          autoResize=true;\n          startEventListeners();\n          //sendSize('autoResize','Auto Resize enabled');\n        } else if (false === resize && true === autoResize) {\n          autoResize=false;\n          stopEventListeners();\n        }\n\n        return autoResize;\n      },\n\n      close: function closeF() {\n        sendMsg(0,0,'close');\n        teardown();\n      },\n\n      getId: function getIdF() {\n        return myID;\n      },\n\n      getPageInfo: function getPageInfoF(callback) {\n        if ('function' === typeof callback) {\n          pageInfoCallback = callback;\n          sendMsg(0,0,'pageInfo');\n        } else {\n          pageInfoCallback = function() {};\n          sendMsg(0,0,'pageInfoStop');\n        }\n      },\n\n      moveToAnchor: function moveToAnchorF(hash) {\n        inPageLinks.findTarget(hash);\n      },\n\n      reset: function resetF() {\n        resetIFrame('parentIFrame.reset');\n      },\n\n      scrollTo: function scrollToF(x,y) {\n        sendMsg(y,x,'scrollTo'); // X&Y reversed at sendMsg uses height/width\n      },\n\n      scrollToOffset: function scrollToF(x,y) {\n        sendMsg(y,x,'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      },\n\n      sendMessage: function sendMessageF(msg,targetOrigin) {\n        sendMsg(0,0,'message',JSON.stringify(msg),targetOrigin);\n      },\n\n      setHeightCalculationMethod: function setHeightCalculationMethodF(heightCalculationMethod) {\n        heightCalcMode = heightCalculationMethod;\n        checkHeightMode();\n      },\n\n      setWidthCalculationMethod: function setWidthCalculationMethodF(widthCalculationMethod) {\n        widthCalcMode = widthCalculationMethod;\n        checkWidthMode();\n      },\n\n      setTargetOrigin: function setTargetOriginF(targetOrigin) {\n        log('Set targetOrigin: '+targetOrigin);\n        targetOriginDefault = targetOrigin;\n      },\n\n      size: function sizeF(customHeight, customWidth) {\n        var valString = ''+(customHeight?customHeight:'')+(customWidth?','+customWidth:'');\n        //lockTrigger();\n        sendSize('size','parentIFrame.size('+valString+')', customHeight, customWidth);\n      }\n    };\n  }\n\n  function initInterval() {\n    if ( 0 !== interval ) {\n      log('setInterval: '+interval+'ms');\n      intervalTimer = setInterval(function() {\n        sendSize('interval','setInterval: '+interval);\n      },Math.abs(interval));\n    }\n  }\n\n  /* istanbul ignore next */  //Not testable in PhantomJS\n  function setupBodyMutationObserver() {\n    function addImageLoadListners(mutation) {\n      function addImageLoadListener(element) {\n        if (false === element.complete) {\n          log('Attach listeners to ' + element.src);\n          element.addEventListener('load', imageLoaded, false);\n          element.addEventListener('error', imageError, false);\n          elements.push(element);\n        }\n      }\n\n      if (mutation.type === 'attributes' && mutation.attributeName === 'src') {\n        addImageLoadListener(mutation.target);\n      } else if (mutation.type === 'childList') {\n        Array.prototype.forEach.call(\n          mutation.target.querySelectorAll('img'),\n          addImageLoadListener\n        );\n      }\n    }\n\n    function removeFromArray(element) {\n      elements.splice(elements.indexOf(element),1);\n    }\n\n    function removeImageLoadListener(element) {\n      log('Remove listeners from ' + element.src);\n      element.removeEventListener('load', imageLoaded, false);\n      element.removeEventListener('error', imageError, false);\n      removeFromArray(element);\n    }\n\n    function imageEventTriggered(event,type,typeDesc) {\n      removeImageLoadListener(event.target);\n      sendSize(type, typeDesc + ': ' + event.target.src, undefined, undefined);\n    }\n\n    function imageLoaded(event) {\n      imageEventTriggered(event,'imageLoad','Image loaded');\n    }\n\n    function imageError(event) {\n      imageEventTriggered(event,'imageLoadFailed','Image load failed');\n    }\n\n    function mutationObserved(mutations) {\n      sendSize('mutationObserver','mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type);\n\n      //Deal with WebKit asyncing image loading when tags are injected into the page\n      mutations.forEach(addImageLoadListners);\n    }\n\n    function createMutationObserver() {\n      var\n        target = document.querySelector('body'),\n\n        config = {\n          attributes            : true,\n          attributeOldValue     : false,\n          characterData         : true,\n          characterDataOldValue : false,\n          childList             : true,\n          subtree               : true\n        };\n\n      observer = new MutationObserver(mutationObserved);\n\n      log('Create body MutationObserver');\n      observer.observe(target, config);\n\n      return observer;\n    }\n\n    var\n      elements         = [],\n      MutationObserver = window.MutationObserver || window.WebKitMutationObserver,\n      observer         = createMutationObserver();\n\n    return {\n      disconnect: function () {\n        if ('disconnect' in observer) {\n          log('Disconnect body MutationObserver');\n          observer.disconnect();\n          elements.forEach(removeImageLoadListener);\n        }\n      }\n    };\n  }\n\n  function setupMutationObserver() {\n    var\tforceIntervalTimer = 0 > interval;\n\n    /* istanbul ignore if */ // Not testable in PhantomJS\n    if (window.MutationObserver || window.WebKitMutationObserver) {\n      if (forceIntervalTimer) {\n        initInterval();\n      } else {\n        bodyObserver = setupBodyMutationObserver();\n      }\n    } else {\n      log('MutationObserver not supported in this browser!');\n      initInterval();\n    }\n  }\n\n\n  // document.documentElement.offsetHeight is not reliable, so\n  // we have to jump through hoops to get a better value.\n  function getComputedStyle(prop,el) {\n    /* istanbul ignore next */  //Not testable in PhantomJS\n    function convertUnitsToPxForIE8(value) {\n      var PIXEL = /^\\d+(px)?$/i;\n\n      if (PIXEL.test(value)) {\n        return parseInt(value,base);\n      }\n\n      var\n        style = el.style.left,\n        runtimeStyle = el.runtimeStyle.left;\n\n      el.runtimeStyle.left = el.currentStyle.left;\n      el.style.left = value || 0;\n      value = el.style.pixelLeft;\n      el.style.left = style;\n      el.runtimeStyle.left = runtimeStyle;\n\n      return value;\n    }\n\n    var retVal = 0;\n    el =  el || document.body;\n\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if (('defaultView' in document) && ('getComputedStyle' in document.defaultView)) {\n      retVal = document.defaultView.getComputedStyle(el, null);\n      retVal = (null !== retVal) ? retVal[prop] : 0;\n    } else {//IE8\n      retVal =  convertUnitsToPxForIE8(el.currentStyle[prop]);\n    }\n\n    return parseInt(retVal,base);\n  }\n\n  function chkEventThottle(timer) {\n    if(timer > throttledTimer/2) {\n      throttledTimer = 2*timer;\n      log('Event throttle increased to ' + throttledTimer + 'ms');\n    }\n  }\n\n  //Idea from https://github.com/guardian/iframe-messenger\n  function getMaxElement(side,elements) {\n    var\n      elementsLength = elements.length,\n      elVal          = 0,\n      maxVal         = 0,\n      Side           = capitalizeFirstLetter(side),\n      timer          = getNow();\n\n    for (var i = 0; i < elementsLength; i++) {\n      elVal = elements[i].getBoundingClientRect()[side] + getComputedStyle('margin'+Side,elements[i]);\n      if (elVal > maxVal) {\n        maxVal = elVal;\n      }\n    }\n\n    timer = getNow() - timer;\n\n    log('Parsed '+elementsLength+' HTML elements');\n    log('Element position calculated in ' + timer + 'ms');\n\n    chkEventThottle(timer);\n\n    return maxVal;\n  }\n\n  function getAllMeasurements(dimention) {\n    return [\n      dimention.bodyOffset(),\n      dimention.bodyScroll(),\n      dimention.documentElementOffset(),\n      dimention.documentElementScroll()\n    ];\n  }\n\n  function getTaggedElements(side,tag) {\n    function noTaggedElementsFound() {\n      warn('No tagged elements ('+tag+') found on page');\n      return document.querySelectorAll('body *');\n    }\n\n    var elements = document.querySelectorAll('['+tag+']');\n\n    if (0 === elements.length) noTaggedElementsFound();\n\n    return getMaxElement(side,elements);\n  }\n\n  function getAllElements() {\n    return document.querySelectorAll('body *');\n  }\n\n  var\n    getHeight = {\n      bodyOffset: function getBodyOffsetHeight() {\n        return  document.body.offsetHeight + getComputedStyle('marginTop') + getComputedStyle('marginBottom');\n      },\n\n      offset: function() {\n        return getHeight.bodyOffset(); //Backwards compatability\n      },\n\n      bodyScroll: function getBodyScrollHeight() {\n        return document.body.scrollHeight;\n      },\n\n      custom: function getCustomWidth() {\n        return customCalcMethods.height();\n      },\n\n      documentElementOffset: function getDEOffsetHeight() {\n        return document.documentElement.offsetHeight;\n      },\n\n      documentElementScroll: function getDEScrollHeight() {\n        return document.documentElement.scrollHeight;\n      },\n\n      max: function getMaxHeight() {\n        return Math.max.apply(null,getAllMeasurements(getHeight));\n      },\n\n      min: function getMinHeight() {\n        return Math.min.apply(null,getAllMeasurements(getHeight));\n      },\n\n      grow: function growHeight() {\n        return getHeight.max(); //Run max without the forced downsizing\n      },\n\n      lowestElement: function getBestHeight() {\n        return Math.max(getHeight.bodyOffset() || getHeight.documentElementOffset(), getMaxElement('bottom',getAllElements()));\n      },\n\n      taggedElement: function getTaggedElementsHeight() {\n        return getTaggedElements('bottom','data-iframe-height');\n      }\n    },\n\n    getWidth = {\n      bodyScroll: function getBodyScrollWidth() {\n        return document.body.scrollWidth;\n      },\n\n      bodyOffset: function getBodyOffsetWidth() {\n        return document.body.offsetWidth;\n      },\n\n      custom: function getCustomWidth() {\n        return customCalcMethods.width();\n      },\n\n      documentElementScroll: function getDEScrollWidth() {\n        return document.documentElement.scrollWidth;\n      },\n\n      documentElementOffset: function getDEOffsetWidth() {\n        return document.documentElement.offsetWidth;\n      },\n\n      scroll: function getMaxWidth() {\n        return Math.max(getWidth.bodyScroll(), getWidth.documentElementScroll());\n      },\n\n      max: function getMaxWidth() {\n        return Math.max.apply(null,getAllMeasurements(getWidth));\n      },\n\n      min: function getMinWidth() {\n        return Math.min.apply(null,getAllMeasurements(getWidth));\n      },\n\n      rightMostElement: function rightMostElement() {\n        return getMaxElement('right', getAllElements());\n      },\n\n      taggedElement: function getTaggedElementsWidth() {\n        return getTaggedElements('right', 'data-iframe-width');\n      }\n    };\n\n\n  function sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n\n    function resizeIFrame() {\n      height = currentHeight;\n      width  = currentWidth;\n\n      sendMsg(height,width,triggerEvent);\n    }\n\n    function isSizeChangeDetected() {\n      function checkTolarance(a,b) {\n        var retVal = Math.abs(a-b) <= tolerance;\n        return !retVal;\n      }\n\n      currentHeight = (undefined !== customHeight)  ? customHeight : getHeight[heightCalcMode]();\n      currentWidth  = (undefined !== customWidth )  ? customWidth  : getWidth[widthCalcMode]();\n\n      return\tcheckTolarance(height,currentHeight) || (calculateWidth && checkTolarance(width,currentWidth));\n    }\n\n    function isForceResizableEvent() {\n      return !(triggerEvent in {'init':1,'interval':1,'size':1});\n    }\n\n    function isForceResizableCalcMode() {\n      return (heightCalcMode in resetRequiredMethods) || (calculateWidth && widthCalcMode in resetRequiredMethods);\n    }\n\n    function logIgnored() {\n      log('No change in size detected');\n    }\n\n    function checkDownSizing() {\n      if (isForceResizableEvent() && isForceResizableCalcMode()) {\n        resetIFrame(triggerEventDesc);\n      } else if (!(triggerEvent in {'interval':1})) {\n        logIgnored();\n      }\n    }\n\n    var\tcurrentHeight,currentWidth;\n\n    if (isSizeChangeDetected() || 'init' === triggerEvent) {\n      lockTrigger();\n      resizeIFrame();\n    } else {\n      checkDownSizing();\n    }\n  }\n\n  var sizeIFrameThrottled = throttle(sizeIFrame);\n\n  function sendSize(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n    function recordTrigger() {\n      if (!(triggerEvent in {'reset':1,'resetPage':1,'init':1})) {\n        log( 'Trigger event: ' + triggerEventDesc );\n      }\n    }\n\n    function isDoubleFiredEvent() {\n      return  triggerLocked && (triggerEvent in doubleEventList);\n    }\n\n    if (!isDoubleFiredEvent()) {\n      recordTrigger();\n      if (triggerEvent === 'init') {\n        sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      } else {\n        sizeIFrameThrottled(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      }\n    } else {\n      log('Trigger event cancelled: '+triggerEvent);\n    }\n  }\n\n  function lockTrigger() {\n    if (!triggerLocked) {\n      triggerLocked = true;\n      log('Trigger event lock on');\n    }\n    clearTimeout(triggerLockedTimer);\n    triggerLockedTimer = setTimeout(function() {\n      triggerLocked = false;\n      log('Trigger event lock off');\n      log('--');\n    },eventCancelTimer);\n  }\n\n  function triggerReset(triggerEvent) {\n    height = getHeight[heightCalcMode]();\n    width  = getWidth[widthCalcMode]();\n\n    sendMsg(height,width,triggerEvent);\n  }\n\n  function resetIFrame(triggerEventDesc) {\n    var hcm = heightCalcMode;\n    heightCalcMode = heightCalcModeDefault;\n\n    log('Reset trigger event: ' + triggerEventDesc);\n    lockTrigger();\n    triggerReset('reset');\n\n    heightCalcMode = hcm;\n  }\n\n  function sendMsg(height,width,triggerEvent,msg,targetOrigin) {\n    function setTargetOrigin() {\n      if (undefined === targetOrigin) {\n        targetOrigin = targetOriginDefault;\n      } else {\n        log('Message targetOrigin: '+targetOrigin);\n      }\n    }\n\n    function sendToParent() {\n      var\n        size  = height + ':' + width,\n        message = myID + ':' +  size + ':' + triggerEvent + (undefined !== msg ? ':' + msg : '');\n\n      log('Sending message to host page (' + message + ')');\n      target.postMessage( msgID + message, targetOrigin);\n    }\n\n    if(true === sendPermit) {\n      setTargetOrigin();\n      sendToParent();\n    }\n  }\n\n  function receiver(event) {\n    var processRequestFromParent = {\n      init: function initFromParent() {\n        function fireInit() {\n          initMsg = event.data;\n          target  = event.source;\n\n          init();\n          firstRun = false;\n          setTimeout(function() { initLock = false;},eventCancelTimer);\n        }\n\n        if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n          fireInit();\n        } else {\n          log('Waiting for page ready');\n          addEventListener(window,'readystatechange',processRequestFromParent.initFromParent);\n        }\n      },\n\n      reset: function resetFromParent() {\n        if (!initLock) {\n          log('Page size reset by host page');\n          triggerReset('resetPage');\n        } else {\n          log('Page reset ignored by init');\n        }\n      },\n\n      resize: function resizeFromParent() {\n        sendSize('resizeParent','Parent window requested size check');\n      },\n\n      moveToAnchor: function moveToAnchorF() {\n        inPageLinks.findTarget(getData());\n      },\n      inPageLink: function inPageLinkF() {this.moveToAnchor();}, //Backward compatability\n\n      pageInfo: function pageInfoFromParent() {\n        var msgBody = getData();\n        log('PageInfoFromParent called from parent: ' + msgBody );\n        pageInfoCallback(JSON.parse(msgBody));\n        log(' --');\n      },\n\n      message: function messageFromParent() {\n        var msgBody = getData();\n\n        log('MessageCallback called from parent: ' + msgBody );\n        messageCallback(JSON.parse(msgBody));\n        log(' --');\n      }\n    };\n\n    function isMessageForUs() {\n      return msgID === (''+event.data).substr(0,msgIdLen); //''+ Protects against non-string messages\n    }\n\n    function getMessageType() {\n      return event.data.split(']')[1].split(':')[0];\n    }\n\n    function getData() {\n      return event.data.substr(event.data.indexOf(':')+1);\n    }\n\n    function isMiddleTier() {\n      return !(typeof module !== 'undefined' && module.exports) && ('iFrameResize' in window);\n    }\n\n    function isInitMsg() {\n      //Test if this message is from a child below us. This is an ugly test, however, updating\n      //the message format would break backwards compatibity.\n      return event.data.split(':')[2] in {'true':1,'false':1};\n    }\n\n    function callFromParent() {\n      var messageType = getMessageType();\n\n      if (messageType in processRequestFromParent) {\n        processRequestFromParent[messageType]();\n      } else if (!isMiddleTier() && !isInitMsg()) {\n        warn('Unexpected message ('+event.data+')');\n      }\n    }\n\n    function processMessage() {\n      if (false === firstRun) {\n        callFromParent();\n      } else if (isInitMsg()) {\n        processRequestFromParent.init();\n      } else {\n        log('Ignored message of type \"' + getMessageType() + '\". Received before initialization.');\n      }\n    }\n\n    if (isMessageForUs()) {\n      processMessage();\n    }\n  }\n\n  //Normally the parent kicks things off when it detects the iFrame has loaded.\n  //If this script is async-loaded, then tell parent page to retry init.\n  function chkLateLoaded() {\n    if('loading' !== document.readyState) {\n      window.parent.postMessage('[iFrameResizerChild]Ready','*');\n    }\n  }\n\n  addEventListener(window, 'message', receiver);\n  chkLateLoaded();\n\n  \n\n})();\n\n\n/***/ })\n\n},[\"KUWr\"]);\n\n\n// WEBPACK FOOTER //\n// _assets/scripts/uiengine-preview.7d527f1efb61f66ec24a.js","/*\n * File: iframeResizer.contentWindow.js\n * Desc: Include this file in any page being loaded into an iframe\n *       to force the iframe to resize to the content size.\n * Requires: iframeResizer.js on host page.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Ian Caunce - ian@hallnet.co.uk\n */\n\n\n;(function(undefined) {\n  'use strict';\n\n  if(typeof window === 'undefined') return; // don't run for server side render\n\n  var\n    autoResize            = true,\n    base                  = 10,\n    bodyBackground        = '',\n    bodyMargin            = 0,\n    bodyMarginStr         = '',\n    bodyObserver          = null,\n    bodyPadding           = '',\n    calculateWidth        = false,\n    doubleEventList       = {'resize':1,'click':1},\n    eventCancelTimer      = 128,\n    firstRun              = true,\n    height                = 1,\n    heightCalcModeDefault = 'bodyOffset',\n    heightCalcMode        = heightCalcModeDefault,\n    initLock              = true,\n    initMsg               = '',\n    inPageLinks           = {},\n    interval              = 32,\n    intervalTimer         = null,\n    logging               = false,\n    msgID                 = '[iFrameSizer]',  //Must match host page msg ID\n    msgIdLen              = msgID.length,\n    myID                  = '',\n    observer              = null,\n    resetRequiredMethods  = {max:1,min:1,bodyScroll:1,documentElementScroll:1},\n    resizeFrom            = 'child',\n    sendPermit            = true,\n    target                = window.parent,\n    targetOriginDefault   = '*',\n    tolerance             = 0,\n    triggerLocked         = false,\n    triggerLockedTimer    = null,\n    throttledTimer        = 16,\n    width                 = 1,\n    widthCalcModeDefault  = 'scroll',\n    widthCalcMode         = widthCalcModeDefault,\n    win                   = window,\n    messageCallback       = function() { warn('MessageCallback function not defined'); },\n    readyCallback         = function() {},\n    pageInfoCallback      = function() {},\n    customCalcMethods     = {\n      height: function() {\n        warn('Custom height calculation function not defined');\n        return document.documentElement.offsetHeight;\n      },\n      width: function() {\n        warn('Custom width calculation function not defined');\n        return document.body.scrollWidth;\n      }\n    },\n    eventHandlersByName   = {};\n\n\n  function addEventListener(el,evt,func) {\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if ('addEventListener' in window) {\n      el.addEventListener(evt,func, false);\n    } else if ('attachEvent' in window) { //IE\n      el.attachEvent('on'+evt,func);\n    }\n  }\n\n  function removeEventListener(el,evt,func) {\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if ('removeEventListener' in window) {\n      el.removeEventListener(evt,func, false);\n    } else if ('detachEvent' in window) { //IE\n      el.detachEvent('on'+evt,func);\n    }\n  }\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  //Based on underscore.js\n  function throttle(func) {\n    var\n      context, args, result,\n      timeout = null,\n      previous = 0,\n      later = function() {\n        previous = getNow();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = args = null;\n        }\n      };\n\n    return function() {\n      var now = getNow();\n\n      if (!previous) {\n        previous = now;\n      }\n\n      var remaining = throttledTimer - (now - previous);\n\n      context = this;\n      args = arguments;\n\n      if (remaining <= 0 || remaining > throttledTimer) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n\n        previous = now;\n        result = func.apply(context, args);\n\n        if (!timeout) {\n          context = args = null;\n        }\n\n      } else if (!timeout) {\n        timeout = setTimeout(later, remaining);\n      }\n\n      return result;\n    };\n  }\n\n  var getNow = Date.now || function() {\n    /* istanbul ignore next */ // Not testable in PhantonJS\n    return new Date().getTime();\n  };\n\n  function formatLogMsg(msg) {\n    return msgID + '[' + myID + ']' + ' ' + msg;\n  }\n\n  function log(msg) {\n    if (logging && ('object' === typeof window.console)) {\n      console.log(formatLogMsg(msg));\n    }\n  }\n\n  function warn(msg) {\n    if ('object' === typeof window.console) {\n      console.warn(formatLogMsg(msg));\n    }\n  }\n\n\n  function init() {\n    readDataFromParent();\n    log('Initialising iFrame ('+location.href+')');\n    readDataFromPage();\n    setMargin();\n    setBodyStyle('background',bodyBackground);\n    setBodyStyle('padding',bodyPadding);\n    injectClearFixIntoBodyElement();\n    checkHeightMode();\n    checkWidthMode();\n    stopInfiniteResizingOfIFrame();\n    setupPublicMethods();\n    startEventListeners();\n    inPageLinks = setupInPageLinks();\n    sendSize('init','Init message from host page');\n    readyCallback();\n  }\n\n  function readDataFromParent() {\n\n    function strBool(str) {\n      return 'true' === str ? true : false;\n    }\n\n    var data = initMsg.substr(msgIdLen).split(':');\n\n    myID               = data[0];\n    bodyMargin         = (undefined !== data[1]) ? Number(data[1])   : bodyMargin; //For V1 compatibility\n    calculateWidth     = (undefined !== data[2]) ? strBool(data[2])  : calculateWidth;\n    logging            = (undefined !== data[3]) ? strBool(data[3])  : logging;\n    interval           = (undefined !== data[4]) ? Number(data[4])   : interval;\n    autoResize         = (undefined !== data[6]) ? strBool(data[6])  : autoResize;\n    bodyMarginStr      = data[7];\n    heightCalcMode     = (undefined !== data[8]) ? data[8]           : heightCalcMode;\n    bodyBackground     = data[9];\n    bodyPadding        = data[10];\n    tolerance          = (undefined !== data[11]) ? Number(data[11]) : tolerance;\n    inPageLinks.enable = (undefined !== data[12]) ? strBool(data[12]): false;\n    resizeFrom         = (undefined !== data[13]) ? data[13]         : resizeFrom;\n    widthCalcMode      = (undefined !== data[14]) ? data[14]         : widthCalcMode;\n  }\n\n  function readDataFromPage() {\n    function readData() {\n      var data = window.iFrameResizer;\n\n      log('Reading data from page: ' + JSON.stringify(data));\n\n      messageCallback     = ('messageCallback'         in data) ? data.messageCallback         : messageCallback;\n      readyCallback       = ('readyCallback'           in data) ? data.readyCallback           : readyCallback;\n      targetOriginDefault = ('targetOrigin'            in data) ? data.targetOrigin            : targetOriginDefault;\n      heightCalcMode      = ('heightCalculationMethod' in data) ? data.heightCalculationMethod : heightCalcMode;\n      widthCalcMode       = ('widthCalculationMethod'  in data) ? data.widthCalculationMethod  : widthCalcMode;\n    }\n\n    function setupCustomCalcMethods(calcMode, calcFunc) {\n      if ('function' === typeof calcMode) {\n        log('Setup custom ' + calcFunc + 'CalcMethod');\n        customCalcMethods[calcFunc] = calcMode;\n        calcMode = 'custom';\n      }\n\n      return calcMode;\n    }\n\n    if(('iFrameResizer' in window) && (Object === window.iFrameResizer.constructor)) {\n      readData();\n      heightCalcMode = setupCustomCalcMethods(heightCalcMode, 'height');\n      widthCalcMode  = setupCustomCalcMethods(widthCalcMode,  'width');\n    }\n\n    log('TargetOrigin for parent set to: ' + targetOriginDefault);\n  }\n\n\n  function chkCSS(attr,value) {\n    if (-1 !== value.indexOf('-')) {\n      warn('Negative CSS value ignored for '+attr);\n      value='';\n    }\n    return value;\n  }\n\n  function setBodyStyle(attr,value) {\n    if ((undefined !== value) && ('' !== value) && ('null' !== value)) {\n      document.body.style[attr] = value;\n      log('Body '+attr+' set to \"'+value+'\"');\n    }\n  }\n\n  function setMargin() {\n    //If called via V1 script, convert bodyMargin from int to str\n    if (undefined === bodyMarginStr) {\n      bodyMarginStr = bodyMargin+'px';\n    }\n\n    setBodyStyle('margin',chkCSS('margin',bodyMarginStr));\n  }\n\n  function stopInfiniteResizingOfIFrame() {\n    document.documentElement.style.height = '';\n    document.body.style.height = '';\n    log('HTML & body height set to \"auto\"');\n  }\n\n\n  function manageTriggerEvent(options) {\n\n    var listener = {\n      add:    function(eventName) {\n        function handleEvent() {\n          sendSize(options.eventName,options.eventType);\n        }\n\n        eventHandlersByName[eventName] = handleEvent;\n\n        addEventListener(window,eventName,handleEvent);\n      },\n      remove: function(eventName) {\n        var handleEvent = eventHandlersByName[eventName];\n        delete eventHandlersByName[eventName];\n\n        removeEventListener(window,eventName,handleEvent);\n      }\n    };\n\n    if(options.eventNames && Array.prototype.map) {\n      options.eventName = options.eventNames[0];\n      options.eventNames.map(listener[options.method]);\n    } else {\n      listener[options.method](options.eventName);\n    }\n\n    log(capitalizeFirstLetter(options.method) + ' event listener: ' + options.eventType);\n  }\n\n  function manageEventListeners(method) {\n    manageTriggerEvent({method:method, eventType: 'Animation Start',           eventNames: ['animationstart','webkitAnimationStart'] });\n    manageTriggerEvent({method:method, eventType: 'Animation Iteration',       eventNames: ['animationiteration','webkitAnimationIteration'] });\n    manageTriggerEvent({method:method, eventType: 'Animation End',             eventNames: ['animationend','webkitAnimationEnd'] });\n    manageTriggerEvent({method:method, eventType: 'Input',                     eventName:  'input' });\n    manageTriggerEvent({method:method, eventType: 'Mouse Up',                  eventName:  'mouseup' });\n    manageTriggerEvent({method:method, eventType: 'Mouse Down',                eventName:  'mousedown' });\n    manageTriggerEvent({method:method, eventType: 'Orientation Change',        eventName:  'orientationchange' });\n    manageTriggerEvent({method:method, eventType: 'Print',                     eventName:  ['afterprint', 'beforeprint'] });\n    manageTriggerEvent({method:method, eventType: 'Ready State Change',        eventName:  'readystatechange' });\n    manageTriggerEvent({method:method, eventType: 'Touch Start',               eventName:  'touchstart' });\n    manageTriggerEvent({method:method, eventType: 'Touch End',                 eventName:  'touchend' });\n    manageTriggerEvent({method:method, eventType: 'Touch Cancel',              eventName:  'touchcancel' });\n    manageTriggerEvent({method:method, eventType: 'Transition Start',          eventNames: ['transitionstart','webkitTransitionStart','MSTransitionStart','oTransitionStart','otransitionstart'] });\n    manageTriggerEvent({method:method, eventType: 'Transition Iteration',      eventNames: ['transitioniteration','webkitTransitionIteration','MSTransitionIteration','oTransitionIteration','otransitioniteration'] });\n    manageTriggerEvent({method:method, eventType: 'Transition End',            eventNames: ['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend'] });\n    if('child' === resizeFrom) {\n      manageTriggerEvent({method:method, eventType: 'IFrame Resized',        eventName:  'resize' });\n    }\n  }\n\n  function checkCalcMode(calcMode,calcModeDefault,modes,type) {\n    if (calcModeDefault !== calcMode) {\n      if (!(calcMode in modes)) {\n        warn(calcMode + ' is not a valid option for '+type+'CalculationMethod.');\n        calcMode=calcModeDefault;\n      }\n      log(type+' calculation method set to \"'+calcMode+'\"');\n    }\n\n    return calcMode;\n  }\n\n  function checkHeightMode() {\n    heightCalcMode = checkCalcMode(heightCalcMode,heightCalcModeDefault,getHeight,'height');\n  }\n\n  function checkWidthMode() {\n    widthCalcMode = checkCalcMode(widthCalcMode,widthCalcModeDefault,getWidth,'width');\n  }\n\n  function startEventListeners() {\n    if ( true === autoResize ) {\n      manageEventListeners('add');\n      setupMutationObserver();\n    }\n    else {\n      log('Auto Resize disabled');\n    }\n  }\n\n  function stopMsgsToParent() {\n    log('Disable outgoing messages');\n    sendPermit = false;\n  }\n\n  function removeMsgListener() {\n    log('Remove event listener: Message');\n    removeEventListener(window, 'message', receiver);\n  }\n\n  function disconnectMutationObserver() {\n    if (null !== bodyObserver) {\n      /* istanbul ignore next */ // Not testable in PhantonJS\n      bodyObserver.disconnect();\n    }\n  }\n\n  function stopEventListeners() {\n    manageEventListeners('remove');\n    disconnectMutationObserver();\n    clearInterval(intervalTimer);\n  }\n\n  function teardown() {\n    stopMsgsToParent();\n    removeMsgListener();\n    if (true === autoResize) stopEventListeners();\n  }\n\n  function injectClearFixIntoBodyElement() {\n    var clearFix = document.createElement('div');\n    clearFix.style.clear   = 'both';\n    clearFix.style.display = 'block'; //Guard against this having been globally redefined in CSS.\n    document.body.appendChild(clearFix);\n  }\n\n  function setupInPageLinks() {\n\n    function getPagePosition () {\n      return {\n        x: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n        y: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n      };\n    }\n\n    function getElementPosition(el) {\n      var\n        elPosition   = el.getBoundingClientRect(),\n        pagePosition = getPagePosition();\n\n      return {\n        x: parseInt(elPosition.left,10) + parseInt(pagePosition.x,10),\n        y: parseInt(elPosition.top,10)  + parseInt(pagePosition.y,10)\n      };\n    }\n\n    function findTarget(location) {\n      function jumpToTarget(target) {\n        var jumpPosition = getElementPosition(target);\n\n        log('Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n        sendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      }\n\n      var\n        hash     = location.split('#')[1] || location, //Remove # if present\n        hashData = decodeURIComponent(hash),\n        target   = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n      if (undefined !== target) {\n        jumpToTarget(target);\n      } else {\n        log('In page link (#' + hash + ') not found in iFrame, so sending to parent');\n        sendMsg(0,0,'inPageLink','#'+hash);\n      }\n    }\n\n    function checkLocationHash() {\n      if ('' !== location.hash && '#' !== location.hash) {\n        findTarget(location.href);\n      }\n    }\n\n    function bindAnchors() {\n      function setupLink(el) {\n        function linkClicked(e) {\n          e.preventDefault();\n\n          /*jshint validthis:true */\n          findTarget(this.getAttribute('href'));\n        }\n\n        if ('#' !== el.getAttribute('href')) {\n          addEventListener(el,'click',linkClicked);\n        }\n      }\n\n      Array.prototype.forEach.call( document.querySelectorAll( 'a[href^=\"#\"]' ), setupLink );\n    }\n\n    function bindLocationHash() {\n      addEventListener(window,'hashchange',checkLocationHash);\n    }\n\n    function initCheck() { //check if page loaded with location hash after init resize\n      setTimeout(checkLocationHash,eventCancelTimer);\n    }\n\n    function enableInPageLinks() {\n      /* istanbul ignore else */ // Not testable in phantonJS\n      if(Array.prototype.forEach && document.querySelectorAll) {\n        log('Setting up location.hash handlers');\n        bindAnchors();\n        bindLocationHash();\n        initCheck();\n      } else {\n        warn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');\n      }\n    }\n\n    if(inPageLinks.enable) {\n      enableInPageLinks();\n    } else {\n      log('In page linking not enabled');\n    }\n\n    return {\n      findTarget:findTarget\n    };\n  }\n\n  function setupPublicMethods() {\n    log('Enable public methods');\n\n    win.parentIFrame = {\n\n      autoResize: function autoResizeF(resize) {\n        if (true === resize && false === autoResize) {\n          autoResize=true;\n          startEventListeners();\n          //sendSize('autoResize','Auto Resize enabled');\n        } else if (false === resize && true === autoResize) {\n          autoResize=false;\n          stopEventListeners();\n        }\n\n        return autoResize;\n      },\n\n      close: function closeF() {\n        sendMsg(0,0,'close');\n        teardown();\n      },\n\n      getId: function getIdF() {\n        return myID;\n      },\n\n      getPageInfo: function getPageInfoF(callback) {\n        if ('function' === typeof callback) {\n          pageInfoCallback = callback;\n          sendMsg(0,0,'pageInfo');\n        } else {\n          pageInfoCallback = function() {};\n          sendMsg(0,0,'pageInfoStop');\n        }\n      },\n\n      moveToAnchor: function moveToAnchorF(hash) {\n        inPageLinks.findTarget(hash);\n      },\n\n      reset: function resetF() {\n        resetIFrame('parentIFrame.reset');\n      },\n\n      scrollTo: function scrollToF(x,y) {\n        sendMsg(y,x,'scrollTo'); // X&Y reversed at sendMsg uses height/width\n      },\n\n      scrollToOffset: function scrollToF(x,y) {\n        sendMsg(y,x,'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      },\n\n      sendMessage: function sendMessageF(msg,targetOrigin) {\n        sendMsg(0,0,'message',JSON.stringify(msg),targetOrigin);\n      },\n\n      setHeightCalculationMethod: function setHeightCalculationMethodF(heightCalculationMethod) {\n        heightCalcMode = heightCalculationMethod;\n        checkHeightMode();\n      },\n\n      setWidthCalculationMethod: function setWidthCalculationMethodF(widthCalculationMethod) {\n        widthCalcMode = widthCalculationMethod;\n        checkWidthMode();\n      },\n\n      setTargetOrigin: function setTargetOriginF(targetOrigin) {\n        log('Set targetOrigin: '+targetOrigin);\n        targetOriginDefault = targetOrigin;\n      },\n\n      size: function sizeF(customHeight, customWidth) {\n        var valString = ''+(customHeight?customHeight:'')+(customWidth?','+customWidth:'');\n        //lockTrigger();\n        sendSize('size','parentIFrame.size('+valString+')', customHeight, customWidth);\n      }\n    };\n  }\n\n  function initInterval() {\n    if ( 0 !== interval ) {\n      log('setInterval: '+interval+'ms');\n      intervalTimer = setInterval(function() {\n        sendSize('interval','setInterval: '+interval);\n      },Math.abs(interval));\n    }\n  }\n\n  /* istanbul ignore next */  //Not testable in PhantomJS\n  function setupBodyMutationObserver() {\n    function addImageLoadListners(mutation) {\n      function addImageLoadListener(element) {\n        if (false === element.complete) {\n          log('Attach listeners to ' + element.src);\n          element.addEventListener('load', imageLoaded, false);\n          element.addEventListener('error', imageError, false);\n          elements.push(element);\n        }\n      }\n\n      if (mutation.type === 'attributes' && mutation.attributeName === 'src') {\n        addImageLoadListener(mutation.target);\n      } else if (mutation.type === 'childList') {\n        Array.prototype.forEach.call(\n          mutation.target.querySelectorAll('img'),\n          addImageLoadListener\n        );\n      }\n    }\n\n    function removeFromArray(element) {\n      elements.splice(elements.indexOf(element),1);\n    }\n\n    function removeImageLoadListener(element) {\n      log('Remove listeners from ' + element.src);\n      element.removeEventListener('load', imageLoaded, false);\n      element.removeEventListener('error', imageError, false);\n      removeFromArray(element);\n    }\n\n    function imageEventTriggered(event,type,typeDesc) {\n      removeImageLoadListener(event.target);\n      sendSize(type, typeDesc + ': ' + event.target.src, undefined, undefined);\n    }\n\n    function imageLoaded(event) {\n      imageEventTriggered(event,'imageLoad','Image loaded');\n    }\n\n    function imageError(event) {\n      imageEventTriggered(event,'imageLoadFailed','Image load failed');\n    }\n\n    function mutationObserved(mutations) {\n      sendSize('mutationObserver','mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type);\n\n      //Deal with WebKit asyncing image loading when tags are injected into the page\n      mutations.forEach(addImageLoadListners);\n    }\n\n    function createMutationObserver() {\n      var\n        target = document.querySelector('body'),\n\n        config = {\n          attributes            : true,\n          attributeOldValue     : false,\n          characterData         : true,\n          characterDataOldValue : false,\n          childList             : true,\n          subtree               : true\n        };\n\n      observer = new MutationObserver(mutationObserved);\n\n      log('Create body MutationObserver');\n      observer.observe(target, config);\n\n      return observer;\n    }\n\n    var\n      elements         = [],\n      MutationObserver = window.MutationObserver || window.WebKitMutationObserver,\n      observer         = createMutationObserver();\n\n    return {\n      disconnect: function () {\n        if ('disconnect' in observer) {\n          log('Disconnect body MutationObserver');\n          observer.disconnect();\n          elements.forEach(removeImageLoadListener);\n        }\n      }\n    };\n  }\n\n  function setupMutationObserver() {\n    var\tforceIntervalTimer = 0 > interval;\n\n    /* istanbul ignore if */ // Not testable in PhantomJS\n    if (window.MutationObserver || window.WebKitMutationObserver) {\n      if (forceIntervalTimer) {\n        initInterval();\n      } else {\n        bodyObserver = setupBodyMutationObserver();\n      }\n    } else {\n      log('MutationObserver not supported in this browser!');\n      initInterval();\n    }\n  }\n\n\n  // document.documentElement.offsetHeight is not reliable, so\n  // we have to jump through hoops to get a better value.\n  function getComputedStyle(prop,el) {\n    /* istanbul ignore next */  //Not testable in PhantomJS\n    function convertUnitsToPxForIE8(value) {\n      var PIXEL = /^\\d+(px)?$/i;\n\n      if (PIXEL.test(value)) {\n        return parseInt(value,base);\n      }\n\n      var\n        style = el.style.left,\n        runtimeStyle = el.runtimeStyle.left;\n\n      el.runtimeStyle.left = el.currentStyle.left;\n      el.style.left = value || 0;\n      value = el.style.pixelLeft;\n      el.style.left = style;\n      el.runtimeStyle.left = runtimeStyle;\n\n      return value;\n    }\n\n    var retVal = 0;\n    el =  el || document.body;\n\n    /* istanbul ignore else */ // Not testable in phantonJS\n    if (('defaultView' in document) && ('getComputedStyle' in document.defaultView)) {\n      retVal = document.defaultView.getComputedStyle(el, null);\n      retVal = (null !== retVal) ? retVal[prop] : 0;\n    } else {//IE8\n      retVal =  convertUnitsToPxForIE8(el.currentStyle[prop]);\n    }\n\n    return parseInt(retVal,base);\n  }\n\n  function chkEventThottle(timer) {\n    if(timer > throttledTimer/2) {\n      throttledTimer = 2*timer;\n      log('Event throttle increased to ' + throttledTimer + 'ms');\n    }\n  }\n\n  //Idea from https://github.com/guardian/iframe-messenger\n  function getMaxElement(side,elements) {\n    var\n      elementsLength = elements.length,\n      elVal          = 0,\n      maxVal         = 0,\n      Side           = capitalizeFirstLetter(side),\n      timer          = getNow();\n\n    for (var i = 0; i < elementsLength; i++) {\n      elVal = elements[i].getBoundingClientRect()[side] + getComputedStyle('margin'+Side,elements[i]);\n      if (elVal > maxVal) {\n        maxVal = elVal;\n      }\n    }\n\n    timer = getNow() - timer;\n\n    log('Parsed '+elementsLength+' HTML elements');\n    log('Element position calculated in ' + timer + 'ms');\n\n    chkEventThottle(timer);\n\n    return maxVal;\n  }\n\n  function getAllMeasurements(dimention) {\n    return [\n      dimention.bodyOffset(),\n      dimention.bodyScroll(),\n      dimention.documentElementOffset(),\n      dimention.documentElementScroll()\n    ];\n  }\n\n  function getTaggedElements(side,tag) {\n    function noTaggedElementsFound() {\n      warn('No tagged elements ('+tag+') found on page');\n      return document.querySelectorAll('body *');\n    }\n\n    var elements = document.querySelectorAll('['+tag+']');\n\n    if (0 === elements.length) noTaggedElementsFound();\n\n    return getMaxElement(side,elements);\n  }\n\n  function getAllElements() {\n    return document.querySelectorAll('body *');\n  }\n\n  var\n    getHeight = {\n      bodyOffset: function getBodyOffsetHeight() {\n        return  document.body.offsetHeight + getComputedStyle('marginTop') + getComputedStyle('marginBottom');\n      },\n\n      offset: function() {\n        return getHeight.bodyOffset(); //Backwards compatability\n      },\n\n      bodyScroll: function getBodyScrollHeight() {\n        return document.body.scrollHeight;\n      },\n\n      custom: function getCustomWidth() {\n        return customCalcMethods.height();\n      },\n\n      documentElementOffset: function getDEOffsetHeight() {\n        return document.documentElement.offsetHeight;\n      },\n\n      documentElementScroll: function getDEScrollHeight() {\n        return document.documentElement.scrollHeight;\n      },\n\n      max: function getMaxHeight() {\n        return Math.max.apply(null,getAllMeasurements(getHeight));\n      },\n\n      min: function getMinHeight() {\n        return Math.min.apply(null,getAllMeasurements(getHeight));\n      },\n\n      grow: function growHeight() {\n        return getHeight.max(); //Run max without the forced downsizing\n      },\n\n      lowestElement: function getBestHeight() {\n        return Math.max(getHeight.bodyOffset() || getHeight.documentElementOffset(), getMaxElement('bottom',getAllElements()));\n      },\n\n      taggedElement: function getTaggedElementsHeight() {\n        return getTaggedElements('bottom','data-iframe-height');\n      }\n    },\n\n    getWidth = {\n      bodyScroll: function getBodyScrollWidth() {\n        return document.body.scrollWidth;\n      },\n\n      bodyOffset: function getBodyOffsetWidth() {\n        return document.body.offsetWidth;\n      },\n\n      custom: function getCustomWidth() {\n        return customCalcMethods.width();\n      },\n\n      documentElementScroll: function getDEScrollWidth() {\n        return document.documentElement.scrollWidth;\n      },\n\n      documentElementOffset: function getDEOffsetWidth() {\n        return document.documentElement.offsetWidth;\n      },\n\n      scroll: function getMaxWidth() {\n        return Math.max(getWidth.bodyScroll(), getWidth.documentElementScroll());\n      },\n\n      max: function getMaxWidth() {\n        return Math.max.apply(null,getAllMeasurements(getWidth));\n      },\n\n      min: function getMinWidth() {\n        return Math.min.apply(null,getAllMeasurements(getWidth));\n      },\n\n      rightMostElement: function rightMostElement() {\n        return getMaxElement('right', getAllElements());\n      },\n\n      taggedElement: function getTaggedElementsWidth() {\n        return getTaggedElements('right', 'data-iframe-width');\n      }\n    };\n\n\n  function sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n\n    function resizeIFrame() {\n      height = currentHeight;\n      width  = currentWidth;\n\n      sendMsg(height,width,triggerEvent);\n    }\n\n    function isSizeChangeDetected() {\n      function checkTolarance(a,b) {\n        var retVal = Math.abs(a-b) <= tolerance;\n        return !retVal;\n      }\n\n      currentHeight = (undefined !== customHeight)  ? customHeight : getHeight[heightCalcMode]();\n      currentWidth  = (undefined !== customWidth )  ? customWidth  : getWidth[widthCalcMode]();\n\n      return\tcheckTolarance(height,currentHeight) || (calculateWidth && checkTolarance(width,currentWidth));\n    }\n\n    function isForceResizableEvent() {\n      return !(triggerEvent in {'init':1,'interval':1,'size':1});\n    }\n\n    function isForceResizableCalcMode() {\n      return (heightCalcMode in resetRequiredMethods) || (calculateWidth && widthCalcMode in resetRequiredMethods);\n    }\n\n    function logIgnored() {\n      log('No change in size detected');\n    }\n\n    function checkDownSizing() {\n      if (isForceResizableEvent() && isForceResizableCalcMode()) {\n        resetIFrame(triggerEventDesc);\n      } else if (!(triggerEvent in {'interval':1})) {\n        logIgnored();\n      }\n    }\n\n    var\tcurrentHeight,currentWidth;\n\n    if (isSizeChangeDetected() || 'init' === triggerEvent) {\n      lockTrigger();\n      resizeIFrame();\n    } else {\n      checkDownSizing();\n    }\n  }\n\n  var sizeIFrameThrottled = throttle(sizeIFrame);\n\n  function sendSize(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n    function recordTrigger() {\n      if (!(triggerEvent in {'reset':1,'resetPage':1,'init':1})) {\n        log( 'Trigger event: ' + triggerEventDesc );\n      }\n    }\n\n    function isDoubleFiredEvent() {\n      return  triggerLocked && (triggerEvent in doubleEventList);\n    }\n\n    if (!isDoubleFiredEvent()) {\n      recordTrigger();\n      if (triggerEvent === 'init') {\n        sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      } else {\n        sizeIFrameThrottled(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      }\n    } else {\n      log('Trigger event cancelled: '+triggerEvent);\n    }\n  }\n\n  function lockTrigger() {\n    if (!triggerLocked) {\n      triggerLocked = true;\n      log('Trigger event lock on');\n    }\n    clearTimeout(triggerLockedTimer);\n    triggerLockedTimer = setTimeout(function() {\n      triggerLocked = false;\n      log('Trigger event lock off');\n      log('--');\n    },eventCancelTimer);\n  }\n\n  function triggerReset(triggerEvent) {\n    height = getHeight[heightCalcMode]();\n    width  = getWidth[widthCalcMode]();\n\n    sendMsg(height,width,triggerEvent);\n  }\n\n  function resetIFrame(triggerEventDesc) {\n    var hcm = heightCalcMode;\n    heightCalcMode = heightCalcModeDefault;\n\n    log('Reset trigger event: ' + triggerEventDesc);\n    lockTrigger();\n    triggerReset('reset');\n\n    heightCalcMode = hcm;\n  }\n\n  function sendMsg(height,width,triggerEvent,msg,targetOrigin) {\n    function setTargetOrigin() {\n      if (undefined === targetOrigin) {\n        targetOrigin = targetOriginDefault;\n      } else {\n        log('Message targetOrigin: '+targetOrigin);\n      }\n    }\n\n    function sendToParent() {\n      var\n        size  = height + ':' + width,\n        message = myID + ':' +  size + ':' + triggerEvent + (undefined !== msg ? ':' + msg : '');\n\n      log('Sending message to host page (' + message + ')');\n      target.postMessage( msgID + message, targetOrigin);\n    }\n\n    if(true === sendPermit) {\n      setTargetOrigin();\n      sendToParent();\n    }\n  }\n\n  function receiver(event) {\n    var processRequestFromParent = {\n      init: function initFromParent() {\n        function fireInit() {\n          initMsg = event.data;\n          target  = event.source;\n\n          init();\n          firstRun = false;\n          setTimeout(function() { initLock = false;},eventCancelTimer);\n        }\n\n        if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n          fireInit();\n        } else {\n          log('Waiting for page ready');\n          addEventListener(window,'readystatechange',processRequestFromParent.initFromParent);\n        }\n      },\n\n      reset: function resetFromParent() {\n        if (!initLock) {\n          log('Page size reset by host page');\n          triggerReset('resetPage');\n        } else {\n          log('Page reset ignored by init');\n        }\n      },\n\n      resize: function resizeFromParent() {\n        sendSize('resizeParent','Parent window requested size check');\n      },\n\n      moveToAnchor: function moveToAnchorF() {\n        inPageLinks.findTarget(getData());\n      },\n      inPageLink: function inPageLinkF() {this.moveToAnchor();}, //Backward compatability\n\n      pageInfo: function pageInfoFromParent() {\n        var msgBody = getData();\n        log('PageInfoFromParent called from parent: ' + msgBody );\n        pageInfoCallback(JSON.parse(msgBody));\n        log(' --');\n      },\n\n      message: function messageFromParent() {\n        var msgBody = getData();\n\n        log('MessageCallback called from parent: ' + msgBody );\n        messageCallback(JSON.parse(msgBody));\n        log(' --');\n      }\n    };\n\n    function isMessageForUs() {\n      return msgID === (''+event.data).substr(0,msgIdLen); //''+ Protects against non-string messages\n    }\n\n    function getMessageType() {\n      return event.data.split(']')[1].split(':')[0];\n    }\n\n    function getData() {\n      return event.data.substr(event.data.indexOf(':')+1);\n    }\n\n    function isMiddleTier() {\n      return !(typeof module !== 'undefined' && module.exports) && ('iFrameResize' in window);\n    }\n\n    function isInitMsg() {\n      //Test if this message is from a child below us. This is an ugly test, however, updating\n      //the message format would break backwards compatibity.\n      return event.data.split(':')[2] in {'true':1,'false':1};\n    }\n\n    function callFromParent() {\n      var messageType = getMessageType();\n\n      if (messageType in processRequestFromParent) {\n        processRequestFromParent[messageType]();\n      } else if (!isMiddleTier() && !isInitMsg()) {\n        warn('Unexpected message ('+event.data+')');\n      }\n    }\n\n    function processMessage() {\n      if (false === firstRun) {\n        callFromParent();\n      } else if (isInitMsg()) {\n        processRequestFromParent.init();\n      } else {\n        log('Ignored message of type \"' + getMessageType() + '\". Received before initialization.');\n      }\n    }\n\n    if (isMessageForUs()) {\n      processMessage();\n    }\n  }\n\n  //Normally the parent kicks things off when it detects the iFrame has loaded.\n  //If this script is async-loaded, then tell parent page to retry init.\n  function chkLateLoaded() {\n    if('loading' !== document.readyState) {\n      window.parent.postMessage('[iFrameResizerChild]Ready','*');\n    }\n  }\n\n  addEventListener(window, 'message', receiver);\n  chkLateLoaded();\n\n  \n\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/dennisreimann/Sources/uiengine/node_modules/iframe-resizer/js/iframeResizer.contentWindow.js\n// module id = KUWr\n// module chunks = 0 1 2 10"],"sourceRoot":""}